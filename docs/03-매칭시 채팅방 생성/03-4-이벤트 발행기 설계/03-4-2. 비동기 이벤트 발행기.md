
### 2. @Async 를 통해 비동기 처리를 진행한다.
@Async 를 통해 다른 스레드를 사용하여 비동기적으로 처리하게 되면,
스레드가 달라지기 때문에 1번에서의 문제는 더이상 발생하지 않게 된다.
따라서 @Async 를 사용하는 것이 더 나은 방안이라 생각하였다.

그런데 @Async 를 사용할 때에도, 비동기로 작업을 처리할 스레드를 어떻게 설정할 것인지에 대해 고민해야 한다.
지금 생각나는 방법들로는 다음과 같은 방법들이 있고, 각 방식의 특징과 장단점을 비교해가며 선택하는 과정이 필요해 보인다.
- 2.1 비동기 스레드를 싱글 스레드로 설정
- 2.2 비동기 스레드가 스레드 풀을 사용하도록 설정
- 2.3 비동기 스레드가 가상 스레드를 사용하도록 설정.

---

## 2.1 비동기 스레드를 싱글 스레드로 설정
비동기 스레드를 싱글 스레드로 설정하게 되면, 이벤트 발행이 메서드 호출 순서에 맞게 순차적으로 이루어짐을 보장할 수 있다.
만약 이벤트 발행이 메서드 호출 순서대로 이루어짐이 보장되어야 하는 상황에 이러한 방식을 사용할 수 있을 것이다.

해당 방식의 단점으로는 이벤트가 초당 몇만개 혹은 그 이상으로 생성되는 경우, 당연하게도 이를 처리하는 성능이 낮아지며,
작업 대기 큐의 최대 크기를 굉장히 넉넉히 설정하지 않는 이상, 쉽게 용량이 다 차 예외가 발생할 수 있다는 점이다.

현재 서비스 내에서는 이벤트 발행 순서가 중요하지 않으므로, 
해당 방식은 체택하지 않을 것이나,
성능 확인을 위해 테스트는 진행해보려 한다.

테스트용 도구로는 NGrinder 를 사용한다. (왜냐면 나는 네이버가 좋으니까..)

- 테스트 결과 : [[03-4-2-1. 비동기 싱글 스레드 테스트]] 
---
