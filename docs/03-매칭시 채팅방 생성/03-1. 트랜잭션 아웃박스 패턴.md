트랜잭션 아웃박스 패턴은 **DB 트랜잭션과 메시지 발행의 일관성을 유지하는 기법**이다.

기본적으로 이벤트를 발행하는 방식에는 다음과 같은 문제가 있다.
- 1. **DB 트랜잭션 성공 후 메시지 발행 실패**
    - 매칭이 완료되어 매치 정보가 **DB에 저장되었지만**, 이벤트 발행이 실패하면 후속 처리가 이루어지지 않음
- 2.  **메시지 발행 후 DB 트랜잭션 실패**
    -  이벤트가 먼저 발행된 후, DB 트랜잭션이 롤백되면 **실제로는 존재하지 않는 매칭 완료 이벤트가 발행됨**

트랜잭션 아웃박스 패턴은 다음과 같다.
DB를 업데이트하는 트랜잭션 내에서, **발행할 이벤트의 정보**도 함께 **DB에 저장**한다.
이때 이벤트의 정보가 저장되는 DB를 **Outbox** 라고 한다.
이후 별도의 프로세스가 Outbox에 저장된 이벤트를 읽어 메시지 브로커에 전송한다.

이와 같이 서비스 로직의 실행과 그 이후의 이벤트 발행을 원자적으로(atomically) 처리할 수 있게 된다.
